<div class="ganancia-socio-container">
  <!-- Header simple y elegante -->
  <div class="header">
    <div class="header-content">
             <div class="title-section">
         <h1>ðŸ’° Ganancias</h1>
         <p>Ingresos netos menos egresos por semana</p>
       </div>
      <button mat-raised-button color="primary" (click)="refreshData()" [disabled]="loading" class="refresh-btn">
        <mat-icon>refresh</mat-icon>
        Actualizar
      </button>
    </div>
  </div>

  <!-- Estado de carga -->
  <div *ngIf="loading" class="loading-container">
    <mat-spinner diameter="60"></mat-spinner>
    <p>Cargando datos...</p>
  </div>

  <!-- Estado de error -->
  <div *ngIf="error && !loading" class="error-container">
    <mat-icon>error_outline</mat-icon>
    <h3>Error al cargar los datos</h3>
    <p>No se pudieron cargar los datos de ganancia por socio.</p>
    <button mat-raised-button color="primary" (click)="refreshData()">
      <mat-icon>refresh</mat-icon>
      Reintentar
    </button>
  </div>

  <!-- Contenido principal -->
  <div *ngIf="!loading && !error && historial" class="main-content">
    
    <!-- Semana actual -->
    <div class="current-week-section" *ngIf="semanaSeleccionada">
      <div class="section-header">
        <h3>ðŸ“… Semana ({{ getFormattedDateRange(semanaSeleccionada.fechaInicio, semanaSeleccionada.fechaFin) }})</h3>
      </div>
      
      <div class="week-stats">
        <div class="stat-item">
          <span class="stat-value">${{ semanaSeleccionada.ingresosNetos | number:'1.0-0' }}</span>
          <span class="stat-label">Ingresos Netos</span>
        </div>
        <div class="stat-item egresos">
          <span class="stat-value">${{ semanaSeleccionada.egresos | number:'1.0-0' }}</span>
          <span class="stat-label">Egresos</span>
        </div>
                 <div class="stat-item ganancia-socio">
           <span class="stat-value">${{ semanaSeleccionada.gananciaSocio | number:'1.0-0' }}</span>
           <span class="stat-label">Ganancia por Socio</span>
         </div>
       </div>
       
       <div class="socios-info">
         <p class="socio-item">Ganancia Alejandro Cardoso: ${{ (semanaSeleccionada.gananciaSocio * 0.5) | number:'1.0-0' }}</p>
         <p class="socio-item">Ganancia Lizardo Oviedo: ${{ (semanaSeleccionada.gananciaSocio * 0.5) | number:'1.0-0' }}</p>
       </div>
    </div>

    <!-- Historial de semanas -->
    <div class="history-section">
      <h3>ðŸ“ˆ Historial por PerÃ­odos</h3>
      <div class="weeks-grid">
        <div class="week-card" *ngFor="let semana of semanasPaginadas" 
             (click)="seleccionarSemana(semana)"
             [class.selected]="semanaSeleccionada?.semana === semana.semana">
          <div class="week-header">
            <h4>{{ getFormattedSemana(semana.semana) }}</h4>
            <span class="week-dates">{{ getFormattedDateRange(semana.fechaInicio, semana.fechaFin) }}</span>
          </div>
          <div class="week-amount">
            <span class="amount-value">${{ semana.gananciaSocio | number:'1.0-0' }}</span>
            <span class="maintenance-count">{{ semana.cantidadMantenimientos }} mantenimientos</span>
            <div class="ganancia-socio-info">
              <span class="ganancia-label">Ingresos Netos:</span>
              <span class="ganancia-value">${{ semana.ingresosNetos | number:'1.0-0' }}</span>
              <span class="egresos-label">Egresos:</span>
              <span class="egresos-value">${{ semana.egresos | number:'1.0-0' }}</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- PaginaciÃ³n -->
      <div class="pagination-container" *ngIf="historial && historial.semanas.length > itemsPerPage">
        <div class="pagination-info">
          <span>Mostrando {{ startIndex + 1 }}-{{ endIndex }} de {{ historial.semanas.length }} perÃ­odos</span>
        </div>
        <div class="pagination-controls">
          <button mat-button [disabled]="currentPage === 1" (click)="previousPage()">
            <mat-icon>chevron_left</mat-icon>
            Anterior
          </button>
          <div class="page-numbers">
            <button mat-button 
                    *ngFor="let page of getPageNumbers()" 
                    [class.active]="page === currentPage"
                    (click)="goToPage(page)">
              {{ page }}
            </button>
          </div>
          <button mat-button [disabled]="currentPage === totalPages" (click)="nextPage()">
            Siguiente
            <mat-icon>chevron_right</mat-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
